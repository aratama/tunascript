// expect: 42
// expect: undefined
// expect: 42
// expect: 42
// expect: 42
// expect: undefined

import { log, to_string } from "prelude"

export function main(): void {
  const a = if (true) { 42 }
  const b = if (false) { 42 }

  const c = if (true) { 42 } else { "42" }
  const d = if (false) { 42 } else { "42" }

  const e = if (true) {
    const base: i64 = 40
    base + 2
  } else {
    0
  }

  const f = if (true) {
    const x: i64 = 1
  }

  const aStr: string = switch (a) {
    case a as i64: to_string(a)
    case a as undefined: "undefined"
  }
  const bStr: string = switch (b) {
    case b as i64: to_string(b)
    case b as undefined: "undefined"
  }
  const cStr: string = switch (c) {
    case c as i64: to_string(c)
    case c as string: c
  }
  const dStr: string = switch (d) {
    case d as i64: to_string(d)
    case d as string: d
  }

  log(aStr)
  log(bStr)
  log(cStr)
  log(dStr)
  log(to_string(e))
  log(if (f == undefined) { "undefined" } else { "not" })
}
