// expect: ok
// expect: ready
// expect: error
// expect: oops
// expect: trace

import { log } from "prelude"

export function main(): void {
  const a: string | error = "ready"
  switch (a) {
    case a as string: {
      log("ok")
      log(a)
    }
    case a as error: {
      log("error")
      log(a.message)
    }
  }

  const b: string | error = error("oops")
  switch (b) {
    case b as string: {
      log("ok")
      log(b)
    }
    case b as error: {
      log("error")
      log(b.message)
      const hasFrame: boolean = switch (b.stacktrace[0]) {
        case frame as string: true
        case e as error: false
      }
      switch (hasFrame) {
        case true: log("trace")
        case false: log("no-trace")
      }
    }
  }
}
