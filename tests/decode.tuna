// expect: ok
// expect: Alice
// expect: 30

import { log, toString, type Error } from "prelude"
import { parse, decode } from "json"

type Person = { name: string, age: number }

export function main(): void | Error {
  const parsed = parse(`{"name":"Alice","age":30}`)?
  const decoded = decode<Person>(parsed)?
  log("ok")
  log(decoded.name)
  log(toString(decoded.age))
}
