// expect: ok
// expect: Alice
// expect: 30

import { log, to_string } from "prelude"
import { parse, decode } from "json"

type Person = { name: string, age: number }

export function main(): void | error {
  const parsed = parse(`{"name":"Alice","age":30}`)?
  const decoded = decode<Person>(parsed)?
  log("ok")
  log(decoded.name)
  log(to_string(decoded.age))
}
